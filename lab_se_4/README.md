## Вместо предисловия

Сразу напишу, что я очень плохо знаю джаву и её экосистему

## Ссылки

https://www.tutorialspoint.com/junit/junit_environment_setup.htm - небольшой гайд по junit

https://ant.apache.org/manual/running.html - как установить ant (обрати внимание на секцию Library Directories)

https://ant.apache.org/manual/tasksoverview.html - описание тэгов и их параметров

## Установка

Должны быть установлены: javac (компилятор), jar (архиватор), javadoc (для генерации документации), ant (сам сборщик)

Архивы из /lib должны быть скопированы в соответствии с Library Directories из мануала (у меня это /home/username/.ant/lib/)

## Структура проекта

src - исходники проекта  
test - исходники тестов  
lib - нужные либы для компиляции с junit и для доп. фич ant-а (вроде циклов)  
doc - место для документации, сгенерированной javadoc  
checksum - место для хранения хешей исходников (не очень уверен, что их необходимо хранить отдельными файлами)  
build - результат компиляции файлов из src и test  

build.properties - здесь мы указываем константы для файла сборщика  
build.xml - сам файл сборщика, подробнее о нём далее  

## build.xml

Наверно худшее, что можно было придумать в плане читаемости

Тэг project, задаем имя и таргет по умолчанию, xmlns:ac="antlib:net.sf.antcontrib" - подключаем antcontrib (почему так, я не знаю, просто скопировал)

property - включаем файл с константами, используем ${prop_from_file}

path - насколько я понял, здесь мы указываем все пути до наших библиотек

target - основной "юнит" нашего сборщика, у каждого есть имя, вызываем соответственно ant %name%  
может зависеть от остальных, т.е. если a2 зависит от a1 и вызываешь a2, ты сначала выполнится a1

javac, junit, jar, javadoc - соответствующие утилиты

Разберём на примере javac

destdir - место, где будут храниться class - файлы
src path - исходники
includeantruntime - честно не углублялся в эту тему, если оставить по умолчанию, то будет предупреждение

classpath - самое интересное (см. также здесь https://junit.org/junit4/faq.html#running_1)

В CLASSPATH (переменная окружения) мы добавляем путь к нашим скомпилированным исходникам (pathelement location="${compiled.classes}")

А также путь до библиотек (path refid="classpath.test")

## Структура jar-архива

Помимо наших class-файлов, в архиве есть папка META-INF, которая содержит MANIFEST.MF

В секции jar есть тег manifest, в котором можно настраивать создание этого файла

attribute означает добавление строки %name%: %value%, в нашем случае Main-Class указывет, что точка входа (т.е. main()) будет в классе Programm

zipfileset src означает добавление другого архива в текущий (это важно, когда мы будем перепаковывать архив для редактирования MANIFEST.MF)

## Циклы

Для этого нам нужна библиотека antcontrib

Используем тег ac:for (не знаю, почему не просто for, видимо подключил так)

ac:for param="filenames" list="${filenames}" - рассматриваем каждое слово из параметра filenames (файл build.property)

condition - если блок внутри оказывается верным, то устанавливается property